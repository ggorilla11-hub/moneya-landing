<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>AIë¨¸ë‹ˆì•¼ ì¬ë¬´ë¶„ì„ ë¦¬í¬íŠ¸</title>
<meta property="og:title" content="ë‚˜ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â® ê²°ê³¼ëŠ”?">
<meta property="og:description" content="AIë¨¸ë‹ˆì•¼ì™€ í•¨ê»˜ ë¶€ìì§€ìˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”!">
<meta property="og:image" content="https://moneya-frontend.vercel.app/assets/house4-ywz7gWNQ.jpg">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #7C3AED;
  --primary-light: #A78BFA;
  --primary-dark: #5B21B6;
  --primary-bg: #F5F3FF;
  --gold: #F59E0B;
  --gold-dark: #D97706;
  --gold-light: #FDE68A;
  --success: #10B981;
  --success-light: #D1FAE5;
  --warning: #F59E0B;
  --warning-light: #FEF3C7;
  --danger: #EF4444;
  --danger-light: #FEE2E2;
  --info: #3B82F6;
  --info-light: #DBEAFE;
  --teal: #14B8A6;
  --teal-light: #CCFBF1;
  --bg: #FFFFFF;
  --bg-secondary: #F8FAFC;
  --bg-tertiary: #F1F5F9;
  --text: #0F172A;
  --text-secondary: #475569;
  --text-muted: #94A3B8;
  --border: #E2E8F0;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
  --radius: 20px;
  --radius-lg: 24px;
  --radius-sm: 12px;
  --radius-xs: 8px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg-secondary);
  min-height: 100vh;
  display: flex;
  justify-content: center;
}

.report-wrapper {
  width: 100%;
  max-width: 480px;
  background: var(--bg);
  min-height: 100vh;
  box-shadow: 0 0 40px rgba(0,0,0,0.1);
}

/* í—¤ë” */
.report-header {
  background: linear-gradient(135deg, var(--primary) 0%, #4C1D95 100%);
  padding: 50px 24px 30px;
  text-align: center;
  color: white;
  position: relative;
  overflow: hidden;
}

.report-header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
}

.report-confetti {
  font-size: 48px;
  margin-bottom: 16px;
  animation: bounce 1s ease-in-out infinite;
  position: relative;
  z-index: 1;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.report-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(10px);
  padding: 8px 18px;
  border-radius: 999px;
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 16px;
  position: relative;
  z-index: 1;
}

.report-title {
  font-size: 26px;
  font-weight: 900;
  margin-bottom: 8px;
  text-shadow: 0 2px 10px rgba(0,0,0,0.2);
  position: relative;
  z-index: 1;
}

.report-subtitle {
  font-size: 15px;
  opacity: 0.9;
  position: relative;
  z-index: 1;
}

/* ê¸ˆìœµì§‘ ì¹´ë“œ */
.house-card {
  margin: -20px 16px 20px;
  background: white;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-xl);
  position: relative;
  z-index: 10;
}

.house-image-wrap {
  position: relative;
  height: 200px;
  overflow: hidden;
}

.house-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.house-level-badge {
  position: absolute;
  top: 14px;
  right: 14px;
  background: rgba(0,0,0,0.7);
  color: white;
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 700;
  backdrop-filter: blur(10px);
}

.house-info {
  padding: 24px;
  text-align: center;
}

.house-name {
  font-size: 32px;
  font-weight: 900;
  color: var(--text);
  margin-bottom: 14px;
}

.house-score-btn {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  color: white;
  padding: 14px 28px;
  border-radius: 999px;
  font-size: 20px;
  font-weight: 800;
  box-shadow: 0 6px 20px rgba(245,158,11,0.4);
}

.house-desc {
  margin-top: 20px;
  padding: 18px;
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  font-size: 15px;
  color: var(--text-secondary);
  line-height: 1.7;
  text-align: left;
}

/* ì„¹ì…˜ ê³µí†µ */
.report-section {
  padding: 24px 16px;
}

.section-card {
  background: white;
  border-radius: var(--radius);
  padding: 24px;
  box-shadow: var(--shadow);
  border: 1px solid var(--border);
}

.section-header {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 20px;
}

.section-icon {
  width: 52px;
  height: 52px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
}

.section-icon.purple { background: linear-gradient(135deg, #EDE9FE, #DDD6FE); }
.section-icon.gold { background: linear-gradient(135deg, #FEF3C7, #FDE68A); }
.section-icon.green { background: linear-gradient(135deg, #D1FAE5, #A7F3D0); }
.section-icon.red { background: linear-gradient(135deg, #FEE2E2, #FECACA); }
.section-icon.blue { background: linear-gradient(135deg, #DBEAFE, #BFDBFE); }
.section-icon.teal { background: linear-gradient(135deg, #CCFBF1, #99F6E4); }

.section-title {
  font-size: 18px;
  font-weight: 800;
  color: var(--text);
}

.section-subtitle {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 2px;
}

/* ë¶€ìì§€ìˆ˜ ë¶„ì„ */
.wealth-formula {
  background: var(--primary-bg);
  border-radius: var(--radius-sm);
  padding: 18px;
  text-align: center;
  margin-bottom: 20px;
}

.wealth-formula-title {
  font-size: 13px;
  color: var(--primary);
  font-weight: 600;
  margin-bottom: 10px;
}

.wealth-formula-text {
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
  font-family: 'Courier New', monospace;
  background: white;
  padding: 12px 16px;
  border-radius: var(--radius-xs);
  display: inline-block;
}

.wealth-grades {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.wealth-grade {
  display: flex;
  align-items: center;
  padding: 14px 16px;
  border-radius: var(--radius-sm);
  background: var(--bg-secondary);
  transition: all 0.2s;
}

.wealth-grade.active {
  background: linear-gradient(135deg, var(--gold-light), #FEF3C7);
  border: 2px solid var(--gold);
  transform: scale(1.02);
}

.wealth-grade-icon {
  font-size: 28px;
  margin-right: 14px;
}

.wealth-grade-info {
  flex: 1;
}

.wealth-grade-name {
  font-size: 15px;
  font-weight: 700;
  color: var(--text);
}

.wealth-grade-range {
  font-size: 12px;
  color: var(--text-muted);
}

.wealth-grade-badge {
  padding: 6px 12px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
}

.wealth-grade.active .wealth-grade-badge {
  background: var(--gold);
  color: white;
}

/* ë¶€ì±„ë¹„ìœ¨ ë¶„ì„ */
.debt-ratio-display {
  text-align: center;
  margin-bottom: 20px;
}

.debt-ratio-value {
  font-size: 48px;
  font-weight: 900;
  color: var(--text);
}

.debt-ratio-label {
  font-size: 14px;
  color: var(--text-muted);
}

.debt-ratio-bar {
  height: 12px;
  background: var(--bg-tertiary);
  border-radius: 6px;
  margin: 20px 0;
  position: relative;
  overflow: hidden;
}

.debt-ratio-fill {
  height: 100%;
  border-radius: 6px;
  transition: width 0.5s ease;
}

.debt-ratio-markers {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
  font-size: 11px;
  color: var(--text-muted);
}

.debt-status-card {
  padding: 18px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  gap: 14px;
  margin-top: 16px;
}

.debt-status-card.safe {
  background: var(--success-light);
  border: 1px solid var(--success);
}

.debt-status-card.warning {
  background: var(--warning-light);
  border: 1px solid var(--warning);
}

.debt-status-card.danger {
  background: var(--danger-light);
  border: 1px solid var(--danger);
}

.debt-status-icon {
  font-size: 32px;
}

.debt-status-text {
  font-size: 14px;
  line-height: 1.5;
}

.debt-status-text strong {
  display: block;
  font-size: 16px;
  margin-bottom: 4px;
}

/* ë¹„ìƒì˜ˆë¹„ìê¸ˆ */
.emergency-cards {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.emergency-card {
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  padding: 18px;
  text-align: center;
}

.emergency-card.active {
  background: var(--teal-light);
  border: 2px solid var(--teal);
}

.emergency-card-icon {
  font-size: 32px;
  margin-bottom: 10px;
}

.emergency-card-type {
  font-size: 13px;
  color: var(--text-muted);
  margin-bottom: 6px;
}

.emergency-card-formula {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.emergency-card-amount {
  font-size: 20px;
  font-weight: 800;
  color: var(--teal);
}

.emergency-tip {
  margin-top: 16px;
  padding: 16px;
  background: var(--info-light);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--info);
  line-height: 1.6;
}

/* ì˜ˆì‚°í‘œ */
.budget-table {
  width: 100%;
  border-collapse: collapse;
}

.budget-table th,
.budget-table td {
  padding: 14px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border);
}

.budget-table th {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  background: var(--bg-secondary);
}

.budget-table td {
  font-size: 14px;
  color: var(--text);
}

.budget-table td:first-child {
  font-weight: 600;
}

.budget-table td:last-child {
  font-weight: 700;
  color: var(--primary);
}

.budget-item-icon {
  margin-right: 8px;
}

/* CTA ì„¹ì…˜ */
.cta-section {
  padding: 24px 16px 40px;
}

.cta-card {
  background: linear-gradient(135deg, var(--primary) 0%, #4C1D95 100%);
  border-radius: var(--radius-lg);
  padding: 32px 24px;
  text-align: center;
  color: white;
  position: relative;
  overflow: hidden;
}

.cta-card::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
}

.cta-icon {
  font-size: 56px;
  margin-bottom: 16px;
  position: relative;
  z-index: 1;
}

.cta-title {
  font-size: 22px;
  font-weight: 900;
  margin-bottom: 12px;
  position: relative;
  z-index: 1;
}

.cta-desc {
  font-size: 14px;
  opacity: 0.9;
  line-height: 1.6;
  margin-bottom: 24px;
  position: relative;
  z-index: 1;
}

.cta-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
  padding: 18px 24px;
  background: white;
  color: var(--primary);
  border: none;
  border-radius: var(--radius-sm);
  font-size: 17px;
  font-weight: 800;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
  text-decoration: none;
  position: relative;
  z-index: 1;
}

.cta-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}

/* ê³µìœ  ë²„íŠ¼ */
.share-section {
  padding: 0 16px 32px;
}

.share-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary);
  text-align: center;
  margin-bottom: 14px;
}

.share-buttons {
  display: flex;
  gap: 12px;
}

.share-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  font-family: inherit;
  transition: all 0.2s;
}

.share-btn.kakao {
  background: #FEE500;
  color: #3C1E1E;
}

.share-btn.sms {
  background: var(--success);
  color: white;
}

.share-btn.copy {
  background: var(--bg-tertiary);
  color: var(--text-secondary);
}

.share-btn:hover {
  transform: translateY(-2px);
}

/* í‘¸í„° */
.report-footer {
  padding: 24px 16px;
  background: var(--bg-secondary);
  text-align: center;
}

.footer-logo {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 12px;
}

.footer-logo-icon {
  font-size: 24px;
}

.footer-logo-text {
  font-size: 18px;
  font-weight: 900;
  color: var(--primary);
}

.footer-copyright {
  font-size: 11px;
  color: var(--text-muted);
  line-height: 1.6;
}

/* ë¡œë”© */
.loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  gap: 20px;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 4px solid var(--border);
  border-top-color: var(--primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  font-size: 16px;
  color: var(--text-secondary);
}

/* ì—ëŸ¬ */
.error-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 24px;
  text-align: center;
}

.error-icon {
  font-size: 64px;
  margin-bottom: 20px;
}

.error-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 12px;
}

.error-desc {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 24px;
}

.error-btn {
  padding: 14px 28px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
}

/* í† ìŠ¤íŠ¸ */
.toast {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: var(--text);
  color: white;
  padding: 14px 24px;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 500;
  opacity: 0;
  transition: all 0.3s;
  z-index: 1000;
}

.toast.show {
  transform: translateX(-50%) translateY(0);
  opacity: 1;
}
</style>
</head>
<body>

<div class="report-wrapper" id="report-wrapper">
  <!-- ë¡œë”© ìƒíƒœ -->
  <div class="loading" id="loading">
    <div class="loading-spinner"></div>
    <div class="loading-text">ë¦¬í¬íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
  </div>
</div>

<!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
<div class="toast" id="toast">ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

<script>
// ê¸ˆìœµì§‘ ë°ì´í„°
const houseData = [
  { level: 1, name: 'í…íŠ¸', minScore: 0, maxScore: 0, image: 'https://moneya-frontend.vercel.app/assets/house1-Cg76rqP7.jpg', desc: 'ì¬ë¬´ ì—¬ì •ì˜ ì‹œì‘ì ì…ë‹ˆë‹¤. ì§€ê¸ˆë¶€í„° ì°¨ê·¼ì°¨ê·¼ ê¸ˆìœµì§‘ì§“ê¸°Â®ë¥¼ ì‹œì‘í•´ìš”! ì‘ì€ ì €ì¶•ë¶€í„° ì‹œì‘í•˜ë©´ ì–¸ì  ê°€ ê¶ì „ì„ ì§€ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ’ª' },
  { level: 2, name: 'ì´ˆê°€ì§‘', minScore: 1, maxScore: 50, image: 'https://moneya-frontend.vercel.app/assets/house2-B1GiF-3L.jpg', desc: 'ê¸°ì´ˆë¥¼ ë‹¤ì§€ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ë¶€ì±„ë¥¼ ì¤„ì´ê³  ë¹„ìƒì˜ˆë¹„ìê¸ˆì„ ë§ˆë ¨í•˜ëŠ” ê²ƒì´ ìš°ì„ ì…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ì €ì¶• ìŠµê´€ì´ ì¤‘ìš”í•´ìš”! ğŸŒ±' },
  { level: 3, name: 'í•œì˜¥', minScore: 51, maxScore: 100, image: 'https://moneya-frontend.vercel.app/assets/house3-CiiNxUBf.jpg', desc: 'ì•ˆì •ì ì¸ ì¬ë¬´ ê¸°ë°˜ì„ ê°–ì¶”ì…¨ìŠµë‹ˆë‹¤! ì €ì¶•ë¥ ì„ ì¡°ê¸ˆ ë” ë†’ì´ê³  íˆ¬ìë¥¼ ì‹œì‘í•˜ë©´ ì–‘ì˜¥ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•  ìˆ˜ ìˆì–´ìš”. ğŸ ' },
  { level: 4, name: 'ì–‘ì˜¥', minScore: 101, maxScore: 200, image: 'https://moneya-frontend.vercel.app/assets/house4-ywz7gWNQ.jpg', desc: 'í›Œë¥­í•œ ì¬ë¬´ ìƒíƒœì…ë‹ˆë‹¤! ì²´ê³„ì ì¸ íˆ¬ìì™€ ì ˆì„¸ ì „ëµìœ¼ë¡œ ê¶ì „ì„ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”. íŒŒì´ì–´ì¡±ë„ ê¿ˆì´ ì•„ë‹™ë‹ˆë‹¤! ğŸŒŸ' },
  { level: 5, name: 'ê¶ì „', minScore: 201, maxScore: 99999, image: 'https://moneya-frontend.vercel.app/assets/house5-CLgrT-Xl.jpg', desc: 'ì§„ì •í•œ ë¶€ìì…ë‹ˆë‹¤! í† ë§ˆìŠ¤ ìŠ¤íƒ ë¦¬ êµìˆ˜ ê¸°ì¤€ ìƒìœ„ ë¶€ìì— í•´ë‹¹í•©ë‹ˆë‹¤. ì´ ìˆ˜ì¤€ì„ ìœ ì§€í•˜ë©´ì„œ ë‹¤ìŒ ì„¸ëŒ€ë¥¼ ìœ„í•œ ìì‚° ì´ì „ë„ ê³ ë ¤í•´ë³´ì„¸ìš”. ğŸ°' }
];

// ê°€ì¡±ìˆ˜ë³„ ì˜ˆì‚° ê¸°ì¤€
const budgetRatios = {
  1: { living: 25, saving: 50, pension: 10, insurance: 5, loan: 10 },
  2: { living: 30, saving: 40, pension: 10, insurance: 10, loan: 10 },
  3: { living: 40, saving: 30, pension: 10, insurance: 10, loan: 10 },
  4: { living: 50, saving: 20, pension: 10, insurance: 10, loan: 10 },
  5: { living: 60, saving: 10, pension: 10, insurance: 10, loan: 10 }
};

// ìˆ«ì í¬ë§·
function formatMoney(num) {
  if (num >= 10000) {
    const uk = Math.floor(num / 10000);
    const rest = num % 10000;
    if (rest > 0) {
      return uk + 'ì–µ ' + rest.toLocaleString() + 'ë§Œì›';
    }
    return uk + 'ì–µì›';
  }
  return num.toLocaleString() + 'ë§Œì›';
}

function formatMoneyShort(num) {
  if (num >= 10000) {
    return (num / 10000).toFixed(1) + 'ì–µì›';
  }
  return num.toLocaleString() + 'ë§Œì›';
}

// URL íŒŒë¼ë¯¸í„° íŒŒì‹±
function getParams() {
  const params = new URLSearchParams(window.location.search);
  return {
    nickname: params.get('nickname') || 'ê³ ê°',
    age: parseInt(params.get('age')) || 40,
    income: parseInt(params.get('income')) || 500,
    assets: parseInt(params.get('assets')) || 50000,
    debt: parseInt(params.get('debt')) || 20000,
    wealthIndex: parseInt(params.get('wealth_index')) || 0,
    houseType: params.get('house_type') || '',
    familyCount: parseInt(params.get('family_count')) || 4
  };
}

// í† ìŠ¤íŠ¸ í‘œì‹œ
function showToast(message) {
  const toast = document.getElementById('toast');
  toast.textContent = message;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 2000);
}

// ê³µìœ  ê¸°ëŠ¥
function shareKakao() {
  const url = window.location.href;
  if (window.Kakao && window.Kakao.isInitialized()) {
    window.Kakao.Link.sendDefault({
      objectType: 'feed',
      content: {
        title: 'ë‚˜ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â® ê²°ê³¼',
        description: 'AIë¨¸ë‹ˆì•¼ì™€ í•¨ê»˜ ë¶€ìì§€ìˆ˜ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!',
        imageUrl: document.getElementById('rpt-house-img').src,
        link: { mobileWebUrl: url, webUrl: url }
      },
      buttons: [{ title: 'ê²°ê³¼ ë³´ê¸°', link: { mobileWebUrl: url, webUrl: url } }]
    });
  } else {
    window.open('https://sharer.kakao.com/talk/friends/picker/link?url=' + encodeURIComponent(url));
  }
}

function shareSMS() {
  const url = window.location.href;
  const text = 'ë‚˜ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â® ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”! ' + url;
  window.location.href = 'sms:?body=' + encodeURIComponent(text);
}

function copyLink() {
  navigator.clipboard.writeText(window.location.href).then(() => {
    showToast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
  });
}

// ë¦¬í¬íŠ¸ ë Œë”ë§
function renderReport() {
  const data = getParams();
  
  // ê³„ì‚°
  const netAsset = data.assets - data.debt;
  let wealthIndex = data.wealthIndex;
  if (!wealthIndex && data.income > 0) {
    wealthIndex = Math.round((netAsset * 10) / (data.age * data.income * 12) * 100);
  }
  const debtRatio = data.assets > 0 ? Math.round((data.debt / data.assets) * 1000) / 10 : 0;
  
  // ê¸ˆìœµì§‘ ê²°ì •
  let house = houseData[0];
  if (data.houseType) {
    house = houseData.find(h => h.name === data.houseType) || houseData[0];
  } else {
    for (let h of houseData) {
      if (wealthIndex >= h.minScore && wealthIndex <= h.maxScore) {
        house = h;
        break;
      }
    }
  }
  
  // ì˜ˆì‚° ê¸°ì¤€
  const familyCount = Math.min(Math.max(data.familyCount, 1), 5);
  const budget = budgetRatios[familyCount];
  
  // ë¶€ì±„ë¹„ìœ¨ ìƒíƒœ
  let debtStatusClass = 'safe';
  let debtStatusIcon = 'ğŸ‰';
  let debtStatusTitle = 'í›Œë¥­í•©ë‹ˆë‹¤!';
  let debtStatusDesc = 'ë¬´ë¶€ì±„ ìƒíƒœì…ë‹ˆë‹¤. ì¬ì •ì  ììœ ì˜ ê¸°ì´ˆë¥¼ ì™„ì„±í•˜ì…¨ìŠµë‹ˆë‹¤!';
  let debtBarColor = 'var(--success)';
  
  if (debtRatio > 0 && debtRatio <= 20) {
    debtStatusIcon = 'âœ…';
    debtStatusTitle = 'ê±´ì „í•œ ìˆ˜ì¤€';
    debtStatusDesc = 'ë¶€ì±„ë¹„ìœ¨ 20% ì´í•˜ë¡œ ê±´ê°•í•œ ì¬ë¬´ ìƒíƒœì…ë‹ˆë‹¤. ì´ ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš”!';
    debtBarColor = 'linear-gradient(90deg, var(--success), var(--success))';
  } else if (debtRatio > 20 && debtRatio <= 40) {
    debtStatusClass = 'warning';
    debtStatusIcon = 'âš ï¸';
    debtStatusTitle = 'ê´€ë¦¬ í•„ìš”';
    debtStatusDesc = 'ë¶€ì±„ë¹„ìœ¨ 40% ì´í•˜ëŠ” ê´€ë¦¬ê°€ í•„ìš”í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ëŒ€ì¶œì„ ì¤„ì´ê³ , ìƒí™˜ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.';
    debtBarColor = 'linear-gradient(90deg, var(--success), var(--warning))';
  } else if (debtRatio > 40) {
    debtStatusClass = 'danger';
    debtStatusIcon = 'ğŸš¨';
    debtStatusTitle = 'ì¦‰ì‹œ ì¡°ì¹˜ í•„ìš”';
    debtStatusDesc = 'ë¶€ì±„ë¹„ìœ¨ì´ 40%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì‹ ìš©ëŒ€ì¶œë¶€í„° ìš°ì„  ìƒí™˜í•˜ê³ , ì§€ì¶œì„ ì¤„ì—¬ ë¶€ì±„ íƒˆì¶œ ê³„íšì„ ì„¸ìš°ì„¸ìš”!';
    debtBarColor = 'linear-gradient(90deg, var(--warning), var(--danger))';
  }
  
  const barWidth = Math.min(debtRatio, 60) / 60 * 100;
  
  // ë“±ê¸‰ ë°°ì§€
  const badges = ['ì‹œì‘', 'ë¯¸í¡', 'ë³´í†µ', 'ì–‘í˜¸', 'í›Œë¥­'];
  
  // HTML ë Œë”ë§
  const wrapper = document.getElementById('report-wrapper');
  wrapper.innerHTML = `
    <!-- í—¤ë” -->
    <div class="report-header">
      <div class="report-confetti">ğŸ‰</div>
      <div class="report-badge"><span>âœ¨</span> ì¬ë¬´ì§„ë‹¨ ì™„ë£Œ</div>
      <h1 class="report-title">${data.nickname}ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â®</h1>
      <p class="report-subtitle">${data.age}ì„¸ Â· ìˆœìì‚° ${formatMoneyShort(netAsset)}</p>
    </div>
    
    <!-- ê¸ˆìœµì§‘ ì¹´ë“œ -->
    <div class="house-card">
      <div class="house-image-wrap">
        <img class="house-image" id="rpt-house-img" src="${house.image}" alt="${house.name}">
        <div class="house-level-badge">${house.level}ë‹¨ê³„</div>
      </div>
      <div class="house-info">
        <div class="house-name">${house.name}</div>
        <div class="house-score-btn">
          <span>â­</span>
          <span>ë¶€ìì§€ìˆ˜ ${wealthIndex}ì </span>
        </div>
        <div class="house-desc">${house.desc}</div>
      </div>
    </div>
    
    <!-- ë¶€ìì§€ìˆ˜ ë¶„ì„ -->
    <div class="report-section">
      <div class="section-card">
        <div class="section-header">
          <div class="section-icon gold">â­</div>
          <div>
            <div class="section-title">ë¶€ìì§€ìˆ˜ ë¶„ì„</div>
            <div class="section-subtitle">í† ë§ˆìŠ¤ ìŠ¤íƒ ë¦¬ êµìˆ˜ì˜ ë¶€ì ê³µì‹</div>
          </div>
        </div>
        
        <div class="wealth-formula">
          <div class="wealth-formula-title">ğŸ“ ë¶€ìì§€ìˆ˜ ê³„ì‚° ê³µì‹</div>
          <div class="wealth-formula-text">(ìˆœìì‚° Ã— 10) Ã· (ë‚˜ì´ Ã— ì›”ê¸‰ Ã— 12) Ã— 100</div>
        </div>
        
        <div class="wealth-grades">
          ${houseData.slice().reverse().map(h => `
            <div class="wealth-grade ${h.level === house.level ? 'active' : ''}" data-level="${h.level}">
              <div class="wealth-grade-icon">${['ğŸ•ï¸','ğŸ›–','ğŸ ','ğŸ¡','ğŸ°'][h.level-1]}</div>
              <div class="wealth-grade-info">
                <div class="wealth-grade-name">${h.name}</div>
                <div class="wealth-grade-range">${h.level === 1 ? '0ì ' : h.level === 5 ? '200ì  ì´ˆê³¼' : h.minScore + '~' + h.maxScore + 'ì '}</div>
              </div>
              <div class="wealth-grade-badge">${h.level === house.level ? 'í˜„ì¬ ìœ„ì¹˜' : badges[h.level-1]}</div>
            </div>
          `).join('')}
        </div>
      </div>
    </div>
    
    <!-- ë¶€ì±„ë¹„ìœ¨ ë¶„ì„ -->
    <div class="report-section">
      <div class="section-card">
        <div class="section-header">
          <div class="section-icon red">ğŸ’³</div>
          <div>
            <div class="section-title">ë¶€ì±„ë¹„ìœ¨ ë¶„ì„</div>
            <div class="section-subtitle">(ë¶€ì±„ Ã· ìì‚°) Ã— 100</div>
          </div>
        </div>
        
        <div class="debt-ratio-display">
          <div class="debt-ratio-value">${debtRatio}%</div>
          <div class="debt-ratio-label">í˜„ì¬ ë¶€ì±„ë¹„ìœ¨</div>
        </div>
        
        <div class="debt-ratio-bar">
          <div class="debt-ratio-fill" style="width:${barWidth}%;background:${debtBarColor}"></div>
        </div>
        <div class="debt-ratio-markers">
          <span>0%</span>
          <span>20%</span>
          <span>40%</span>
          <span>60%+</span>
        </div>
        
        <div class="debt-status-card ${debtStatusClass}">
          <div class="debt-status-icon">${debtStatusIcon}</div>
          <div class="debt-status-text">
            <strong>${debtStatusTitle}</strong>
            ${debtStatusDesc}
          </div>
        </div>
      </div>
    </div>
    
    <!-- ë¹„ìƒì˜ˆë¹„ìê¸ˆ -->
    <div class="report-section">
      <div class="section-card">
        <div class="section-header">
          <div class="section-icon teal">ğŸ›¡ï¸</div>
          <div>
            <div class="section-title">ë¹„ìƒì˜ˆë¹„ìê¸ˆ</div>
            <div class="section-subtitle">ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ì— ëŒ€ë¹„í•˜ì„¸ìš”</div>
          </div>
        </div>
        
        <div class="emergency-cards">
          <div class="emergency-card">
            <div class="emergency-card-icon">ğŸ‘«</div>
            <div class="emergency-card-type">ë§ë²Œì´ ê°€êµ¬</div>
            <div class="emergency-card-formula">ì›”ê¸‰ Ã— 3ê°œì›”</div>
            <div class="emergency-card-amount">${formatMoney(data.income * 3)}</div>
          </div>
          <div class="emergency-card active">
            <div class="emergency-card-icon">ğŸ‘¤</div>
            <div class="emergency-card-type">ì™¸ë²Œì´ ê°€êµ¬</div>
            <div class="emergency-card-formula">ì›”ê¸‰ Ã— 6ê°œì›”</div>
            <div class="emergency-card-amount">${formatMoney(data.income * 6)}</div>
          </div>
        </div>
        
        <div class="emergency-tip">
          ğŸ’¡ <strong>TIP:</strong> ë¹„ìƒì˜ˆë¹„ìê¸ˆì€ CMAë‚˜ ìˆ˜ì‹œì…ì¶œê¸ˆ ê³„ì¢Œì— ë³´ê´€í•˜ì„¸ìš”. ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì‹¤ì§, ì§ˆë³‘, ì‚¬ê³ ì— ëŒ€ë¹„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
      </div>
    </div>
    
    <!-- ê°€ì¡±ìˆ˜ë³„ ì˜ˆì‚° -->
    <div class="report-section">
      <div class="section-card">
        <div class="section-header">
          <div class="section-icon blue">ğŸ“‹</div>
          <div>
            <div class="section-title">${familyCount}ì¸ ê°€êµ¬ ë§ì¶¤ ì˜ˆì‚°</div>
            <div class="section-subtitle">í•œêµ­FPSB ê¸°ì¤€</div>
          </div>
        </div>
        
        <table class="budget-table">
          <thead>
            <tr>
              <th>í•­ëª©</th>
              <th>ê¸°ì¤€</th>
              <th>ì›” ì˜ˆì‚°</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="budget-item-icon">ğŸ </span>ìƒí™œë¹„</td>
              <td>${budget.living}%</td>
              <td>${formatMoney(Math.round(data.income * budget.living / 100))}</td>
            </tr>
            <tr>
              <td><span class="budget-item-icon">ğŸ’°</span>ì €ì¶•/íˆ¬ì</td>
              <td>${budget.saving}%</td>
              <td>${formatMoney(Math.round(data.income * budget.saving / 100))}</td>
            </tr>
            <tr>
              <td><span class="budget-item-icon">ğŸ¦</span>ë…¸í›„ì—°ê¸ˆ</td>
              <td>${budget.pension}%</td>
              <td>${formatMoney(Math.round(data.income * budget.pension / 100))}</td>
            </tr>
            <tr>
              <td><span class="budget-item-icon">ğŸ›¡ï¸</span>ë³´ì¥ì„±ë³´í—˜</td>
              <td>${budget.insurance}%</td>
              <td>${formatMoney(Math.round(data.income * budget.insurance / 100))}</td>
            </tr>
            <tr>
              <td><span class="budget-item-icon">ğŸ’³</span>ëŒ€ì¶œì›ë¦¬ê¸ˆ</td>
              <td>${budget.loan}%</td>
              <td>${formatMoney(Math.round(data.income * budget.loan / 100))}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- CTA -->
    <div class="cta-section">
      <div class="cta-card">
        <div class="cta-icon">ğŸš€</div>
        <h3 class="cta-title">ë” ìì„¸í•œ ë¶„ì„ì´ í•„ìš”í•˜ì„¸ìš”?</h3>
        <p class="cta-desc">AIë¨¸ë‹ˆì•¼ì—ì„œ ë§¤ì¼ ì§€ì¶œì„ ìŒì„±ìœ¼ë¡œ ê´€ë¦¬í•˜ê³ ,<br>ê¶ì „ì„ í–¥í•œ ì—¬ì •ì„ ì‹œì‘í•˜ì„¸ìš”!</p>
        <a href="https://moneya-frontend.vercel.app" class="cta-btn">
          <span>ğŸ’¬</span>
          <span>AIë¨¸ë‹ˆì•¼ ì•± ì‹œì‘í•˜ê¸°</span>
        </a>
      </div>
    </div>
    
    <!-- ê³µìœ  ë²„íŠ¼ -->
    <div class="share-section">
      <div class="share-title">ğŸ“¤ ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê¸°</div>
      <div class="share-buttons">
        <button class="share-btn kakao" onclick="shareKakao()"><span>ğŸ’¬</span> ì¹´í†¡</button>
        <button class="share-btn sms" onclick="shareSMS()"><span>ğŸ’¬</span> ë¬¸ì</button>
        <button class="share-btn copy" onclick="copyLink()"><span>ğŸ”—</span> ë³µì‚¬</button>
      </div>
    </div>
    
    <!-- í‘¸í„° -->
    <div class="report-footer">
      <div class="footer-logo">
        <span class="footer-logo-icon">ğŸ’°</span>
        <span class="footer-logo-text">AIë¨¸ë‹ˆì•¼</span>
      </div>
      <div class="footer-copyright">
        Â© 2017 ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ. All rights reserved.<br>
        ëˆ ì“°ê¸° ì „ì— ë¬¼ì–´ë³´ì„¸ìš”, AIë¨¸ë‹ˆì•¼ì—ê²Œ
      </div>
    </div>
  `;
}

// ì´ˆê¸°í™”
setTimeout(renderReport, 500);
</script>

</body>
</html>
